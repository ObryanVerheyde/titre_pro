var p4={dom_plateau:[],turn:1,game_status:0,coups:0,n:6,m:7,init:function(d,c,f){if(c){this.n=c}if(f){this.n=f}t=document.createElement("table");t.id="plateau";for(var b=this.n-1;b>=0;b--){var e=document.createElement("tr");this.dom_plateau[b]=[];for(var a=0;a<this.m;a++){var g=document.createElement("td");g.dataset.column=a;e.appendChild(g);this.dom_plateau[b][a]=g}t.appendChild(e)}d.innerHTML="";d.appendChild(t);t.addEventListener("click",function(h){p4.handler(h)})},set:function(c,b,a){this.dom_plateau[c][b].className="joueur"+a;this.coups++;this.turn=3-this.turn},play:function(b){if(this.game_status!=0){if(window.confirm("La partie est finie!\n\nSouhaitez-vous recommencer?")){this.reset()}return}var c;for(var a=0;a<this.n;a++){if(!this.dom_plateau[a][b].className){c=a;break}}if(c===undefined){window.alert("La colonne est pleine!");return}this.set(c,b,this.turn);if(this.win(c,b,"joueur"+(3-this.turn))){this.game_status=3-this.turn}else{if(this.coups>=this.n*this.m){this.game_status=-1}}switch(this.game_status){case -1:window.alert("Partie Nulle!!");break;case 1:window.alert("Victoire du joueur 1");break;case 2:window.alert("Victoire du joueur 2");break}},handler:function(b){var a=b.target.dataset.column;console.log(a);if(a){this.play(parseInt(a))}},win:function(g,e,c){var f=0;for(var b=0;b<this.m;b++){f=(this.dom_plateau[g][b].className==c)?f+1:0;if(f>=4){return true}}f=0;for(var d=0;d<this.n;d++){f=(this.dom_plateau[d][e].className==c)?f+1:0;if(f>=4){return true}}f=0;var a=g-e;for(var d=Math.max(a,0);d<Math.min(this.n,this.m+a);d++){f=(this.dom_plateau[d][d-a].className==c)?f+1:0;if(f>=4){return true}}f=0;a=g+e;for(var d=Math.max(a-this.m+1,0);d<Math.min(this.n,a+1);d++){f=(this.dom_plateau[d][a-d].className==c)?f+1:0;if(f>=4){return true}}return false},reset:function(){for(var b=0;b<this.n;b++){for(var a=0;a<this.m;a++){this.dom_plateau[b][a].className=""}}this.coups=0;this.game_status=0},};p4.init(document.querySelector("#jeu"));